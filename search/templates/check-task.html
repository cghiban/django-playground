<div>
    <div>Job status: <strong>{{task_status}}</strong></div>
    <div id="message"></div>
</div>
<script type="text/javascript">
    window.addEventListener("load", (event) => {
        const msg = document.querySelector("#message");
        console.log("page is fully loaded");
        {% if task_status == "PENDING" %}
            // reloading the page to get the status after 10 seconds
            msg.textContent = "job is processing... checking again in 10s";
            window.setTimeout(function() {
                window.location.reload();
            }, 10000)
        {% else %}
            msg.textContent = "ready to load the results... stand by...";
            // redirect to load results after half a second
            window.setTimeout(function() {
                window.location.href = "./search-results?t={{task_id}}&f={{f}}&q={{q}}";
            }, 500)
        {% endif %}
    });
</script>